(()=>{var e={871:()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}document.addEventListener("DOMContentLoaded",(function(t){var n=document.querySelectorAll(".expandable-chbox");if(null!==n){var i,a=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(c)throw s}}}}(n);try{var r=function(){var e=i.value;e.addEventListener("click",(function(t){e.classList.toggle("expandable-chbox--active")}))};for(a.s();!(i=a.n()).done;)r()}catch(e){a.e(e)}finally{a.f()}}}))},253:()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t,n,i,a){e.value=Math.min(parseInt(e.value),parseInt(t.value)),n.textContent=e.value;var r=e.value/i*100;a.style.left="".concat(r,"%")}function n(e,t,n,i,a){e.value=Math.max(parseInt(t.value),parseInt(e.value)),n.textContent=e.value;var r=e.value/i*100;a.style.right="".concat(100-r,"%")}document.addEventListener("DOMContentLoaded",(function(){var i=document.querySelectorAll(".slider");if(null!==i){var a,r=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(c)throw s}}}}(i);try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s.querySelector(".slider__range-between"),c=s.querySelector(".slider__range-input--left"),d=s.querySelector(".slider__range-input--right"),l=c.max,u=s.querySelector(".slider__range-value-item--left"),h=s.querySelector(".slider__range-value-item--right");c.addEventListener("input",t.bind(null,c,d,u,l,o)),d.addEventListener("input",n.bind(null,d,c,h,l,o)),t(c,d,u,l,o),n(d,c,h,l,o)}}catch(e){r.e(e)}finally{r.f()}}}))},922:()=>{function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(c)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t,n,i,a,r){var s=e.querySelector(".dropdown__result-txt"),o=t.closest(".dropdown__amount-block").previousElementSibling.innerHTML,c="",d="",l=r.parentElement.previousElementSibling.innerHTML;if(e.classList.contains("dropdown--type--rooms")){switch(n){case 1:if(/спал/i.test(o))c="".concat(n," ").concat(o.toLowerCase().match(/спал/i),"ьня");else if(/кроват/i.test(o))c="".concat(n," ").concat(o.toLowerCase().match(/кроват/i),"ь");else{var u=o.split(" ");c+="".concat(n," ").concat(u[0].toLowerCase().match(/ванн/i),"ая "),c+="".concat(u[1].toLowerCase().match(/комнат/i),"а")}break;case 2:case 3:case 4:/спал/i.test(o)||/кроват/i.test(o),c="".concat(n," ").concat(o.toLowerCase());break;default:if(/спал/i.test(o))c="".concat(n," ").concat(o.toLowerCase().match(/спал/i),"ен");else if(/кроват/i.test(o))c="".concat(n," ").concat(o.toLowerCase().match(/кроват/i),"ей");else{var h=o.split(" ");c+="".concat(n," ").concat(h[0].toLowerCase().match(/ванн/i),"ых "),c+="".concat(h[1].toLowerCase().match(/комнат/i))}}if(a.push([r,c]),a.length>1)for(var f=0;f<a.length-1;f++)l===a[f][0].parentElement.previousElementSibling.innerHTML&&(a[f]=[r,c],a.splice(f,1),0===n&&(a.pop(),0===a.length&&(d=i)));var p=[];a.forEach((function(e){return p.push(e[1])})),d=p.join(", ")}else{r.classList.contains("dropdown__amount-btn--plus")?a.push(l):a.pop();var m=a.length;switch(m){case 0:d=i;break;case 1:d="".concat(m," гость");break;case 2:case 3:case 4:d="".concat(m," гостя");break;default:d="".concat(m," гостей")}}s.innerHTML=d}function i(e,t,i,a,r,s){var o=parseInt(t.innerHTML),c=s.target;c.classList.contains("dropdown__amount-btn--minus")?(t.innerHTML="".concat(o-=1),n(e,t,o,a,r,c),t.innerHTML<=0?c.classList.add("dropdown__amount-btn--non-active"):(c.classList.remove("dropdown__amount-btn--non-active"),i.classList.remove("dropdown__amount-btn--non-active"))):(t.innerHTML="".concat(o+=1),n(e,t,o,a,r,c),t.innerHTML>=10?c.classList.add("dropdown__amount-btn--non-active"):(c.classList.remove("dropdown__amount-btn--non-active"),i.classList.remove("dropdown__amount-btn--non-active")))}function a(t,n,i,a,r){t.querySelector(".dropdown__result-txt").innerHTML=i,a.splice(0,a.length);var s,o=e(n);try{for(o.s();!(s=o.n()).done;){var c=s.value,d=c.firstElementChild,l=c.lastElementChild,u=c.querySelector(".dropdown__amount-numb");u.innerHTML="0",u.innerHTML<=0?d.classList.add("dropdown__amount-btn--non-active"):d.classList.remove("dropdown__amount-btn--non-active"),u.innerHTML>=10?l.classList.add("dropdown__amount-btn--non-active"):l.classList.remove("dropdown__amount-btn--non-active")}}catch(e){o.e(e)}finally{o.f()}}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelectorAll(".dropdown");if(null!==t){var n,r=e(t);try{var s=function(){var t=n.value,r=t.querySelector(".dropdown__result-txt").innerHTML,s=t.querySelectorAll(".dropdown__amount-block"),o=t.querySelector(".btn--type--dropdown-btn-clear"),c=[];null!==o&&o.addEventListener("click",a.bind(null,t,s,r,c));var d,l=e(s);try{for(l.s();!(d=l.n()).done;){var u=d.value,h=u.firstElementChild,f=u.lastElementChild,p=u.querySelector(".dropdown__amount-numb");p.innerHTML<=0?h.classList.add("dropdown__amount-btn--non-active"):h.classList.remove("dropdown__amount-btn--non-active"),p.innerHTML>=10?f.classList.add("dropdown__amount-btn--non-active"):f.classList.remove("dropdown__amount-btn--non-active"),h.onclick=i.bind(null,t,p,f,r,c),f.onclick=i.bind(null,t,p,h,r,c)}}catch(e){l.e(e)}finally{l.f()}t.querySelector(".dropdown__header").addEventListener("click",(function(e){t.classList.toggle("dropdown--active")}))};for(r.s();!(n=r.n()).done;)s()}catch(e){r.e(e)}finally{r.f()}}}))},166:()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var t,n=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(c)throw s}}}}(document.querySelectorAll(".like-btn"));try{var i=function(){var e=t.value;e.onclick=function(){var t=e.querySelector(".like-btn__amount"),n=Number(t.innerHTML);e.classList.contains("like-btn--active")?t.innerHTML=n-=1:t.innerHTML=n+=1,e.classList.toggle("like-btn--active")}};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}},296:()=>{var e=document.querySelector(".pagination__list");null!==e&&function t(n,i){e.innerHTML="";var a=i-1,r=i+1,s=[];if(i>1){var o=document.createElement("li");o.className="pagination__item pagination__item--icon pagination__item--icon--prev",o.onclick=t.bind(null,n,i-1),s.push(o)}if(i>2){var c=document.createElement("li");if(c.className="pagination__item pagination__item--pagination__item--numb",c.innerHTML="<span pagination__value>1</span>",c.onclick=t.bind(null,n,1),s.push(c),i>3){var d=document.createElement("li");d.className="pagination__item pagination__item--dots",d.innerHTML="<span pagination__value>...</span>",s.push(d)}}i===n&&(a-=1),1===i&&(r+=1);for(var l=a;l<=r;l++)if(!(l>n)){var u=document.createElement("li");u.className="pagination__item pagination__item--numb",0===l&&(l+=1),i===l?u.classList.add("pagination__item--active"):u.classList.remove("pagination__item--active"),u.innerHTML="<span pagination__value>".concat(l,"</span>"),u.onclick=t.bind(null,n,l),s.push(u)}if(i<n-1){if(i<n-2){var h=document.createElement("li");h.className="pagination__item pagination__item--dots",h.innerHTML="<span pagination__value>...</span>",s.push(h)}var f=document.createElement("li");f.className="pagination__item pagination__item--numb",f.innerHTML="<span pagination__value>".concat(n,"</span>"),f.onclick=t.bind(null,n,n),s.push(f)}if(i<n){var p=document.createElement("li");p.className="pagination__item pagination__item--icon pagination__item--icon--next",p.onclick=t.bind(null,n,i+1),s.push(p)}e.prepend.apply(e,s)}(15,1)},677:()=>{function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var t,n=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))){i&&(t=i);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var e=i.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(c)throw s}}}}(document.querySelectorAll(".rating"));try{var i=function(){var e=t.value,n=e.querySelectorAll(".rating__item");e.onclick=function(e){var t=e.target.classList;t.contains("active")||(n.forEach((function(e){return e.classList.remove("active")})),t.add("active"))}};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}(()=>{"use strict";function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function t(e){return e[e.length-1]}function i(e,...t){return t.forEach((t=>{e.includes(t)||e.push(t)})),e}function a(e,t){return e?e.split(t):[]}function r(e,t,n){return(void 0===t||e>=t)&&(void 0===n||e<=n)}function s(e,t,n){return e<t?t:e>n?n:e}function o(e,t,n={},i=0,a=""){a+=`<${Object.keys(n).reduce(((e,t)=>{let a=n[t];return"function"==typeof a&&(a=a(i)),`${e} ${t}="${a}"`}),e)}></${e}>`;const r=i+1;return r<t?o(e,t,n,r,a):a}function c(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function d(e){return new Date(e).setHours(0,0,0,0)}function l(){return(new Date).setHours(0,0,0,0)}function u(...e){switch(e.length){case 0:return l();case 1:return d(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function h(e,t){const n=new Date(e);return n.setDate(n.getDate()+t)}function f(e,t){const n=new Date(e),i=n.getMonth()+t;let a=i%12;a<0&&(a+=12);const r=n.setMonth(i);return n.getMonth()!==a?n.setDate(0):r}function p(e,t){const n=new Date(e),i=n.getMonth(),a=n.setFullYear(n.getFullYear()+t);return 1===i&&2===n.getMonth()?n.setDate(0):a}function m(e,t){return(e-t+7)%7}function g(e,t,n=0){const i=new Date(e).getDay();return h(e,m(t,n)-m(i,n))}function v(e,t){const n=new Date(e).getFullYear();return Math.floor(n/t)*t}n(166),n(253),n(677),n(296),n(922),n(871);const y=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,w=/[\s!-/:-@[-`{-~年月日]+/;let b={};const k={y:(e,t)=>new Date(e).setFullYear(parseInt(t,10)),m(e,t,n){const i=new Date(e);let a=parseInt(t,10)-1;if(isNaN(a)){if(!t)return NaN;const e=t.toLowerCase(),i=t=>t.toLowerCase().startsWith(e);if(a=n.monthsShort.findIndex(i),a<0&&(a=n.months.findIndex(i)),a<0)return NaN}return i.setMonth(a),i.getMonth()!==S(a)?i.setDate(0):i.getTime()},d:(e,t)=>new Date(e).setDate(parseInt(t,10))},D={d:e=>e.getDate(),dd:e=>_(e.getDate(),2),D:(e,t)=>t.daysShort[e.getDay()],DD:(e,t)=>t.days[e.getDay()],m:e=>e.getMonth()+1,mm:e=>_(e.getMonth()+1,2),M:(e,t)=>t.monthsShort[e.getMonth()],MM:(e,t)=>t.months[e.getMonth()],y:e=>e.getFullYear(),yy:e=>_(e.getFullYear(),2).slice(-2),yyyy:e=>_(e.getFullYear(),4)};function S(e){return e>-1?e%12:S(e+12)}function _(e,t){return e.toString().padStart(t,"0")}function x(e){if("string"!=typeof e)throw new Error("Invalid date format.");if(e in b)return b[e];const n=e.split(y),i=e.match(new RegExp(y,"g"));if(0===n.length||!i)throw new Error("Invalid date format.");const a=i.map((e=>D[e])),r=Object.keys(k).reduce(((e,t)=>(i.find((e=>"D"!==e[0]&&e[0].toLowerCase()===t))&&e.push(t),e)),[]);return b[e]={parser(e,t){const n=e.split(w).reduce(((e,t,n)=>{if(t.length>0&&i[n]){const a=i[n][0];"M"===a?e.m=t:"D"!==a&&(e[a]=t)}return e}),{});return r.reduce(((e,i)=>{const a=k[i](e,n[i],t);return isNaN(a)?e:a}),l())},formatter:(e,i)=>a.reduce(((t,a,r)=>t+`${n[r]}${a(e,i)}`),"")+t(n)}}function M(e,t,n){if(e instanceof Date||"number"==typeof e){const t=d(e);return isNaN(t)?void 0:t}if(e){if("today"===e)return l();if(t&&t.toValue){const i=t.toValue(e,t,n);return isNaN(i)?void 0:d(i)}return x(t).parser(e,n)}}function L(e,t,n){if(isNaN(e)||!e&&0!==e)return"";const i="number"==typeof e?new Date(e):e;return t.toDisplay?t.toDisplay(i,t,n):x(t).formatter(i,n)}const E=new WeakMap,{addEventListener:C,removeEventListener:O}=EventTarget.prototype;function A(e,t){let n=E.get(e);n||(n=[],E.set(e,n)),t.forEach((e=>{C.call(...e),n.push(e)}))}function N(e){let t=E.get(e);t&&(t.forEach((e=>{O.call(...e)})),E.delete(e))}if(!Event.prototype.composedPath){const e=(t,n=[])=>{let i;return n.push(t),t.parentNode?i=t.parentNode:t.host?i=t.host:t.defaultView&&(i=t.defaultView),i?e(i,n):n};Event.prototype.composedPath=function(){return e(this.target)}}function F(e,t,n,i=0){const a=e[i];return t(a)?a:a!==n&&a.parentElement?F(e,t,n,i+1):void 0}function V(e,t){const n="function"==typeof t?t:e=>e.matches(t);return F(e.composedPath(),n,e.currentTarget)}const B={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},T={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"»",orientation:"auto",pickLevel:0,prevArrow:"«",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},H=document.createRange();function Y(e){return H.createContextualFragment(e)}function W(e){"none"!==e.style.display&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function j(e){"none"===e.style.display&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function I(e){e.firstChild&&(e.removeChild(e.firstChild),I(e))}const{language:q,format:$,weekStart:K}=T;function P(e,t){return e.length<6&&t>=0&&t<7?i(e,t):e}function R(e){return(e+6)%7}function U(e,t,n,i){const a=M(e,t,n);return void 0!==a?a:i}function J(e,t,n=3){const i=parseInt(e,10);return i>=0&&i<=n?i:t}function z(t,n){const a=Object.assign({},t),r={},s=n.constructor.locales;let{format:o,language:c,locale:d,maxDate:l,maxView:h,minDate:f,pickLevel:p,startView:m,weekStart:g}=n.config||{};if(a.language){let e;if(a.language!==c&&(s[a.language]?e=a.language:(e=a.language.split("-")[0],void 0===s[e]&&(e=!1))),delete a.language,e){c=r.language=e;const t=d||s[q];d=Object.assign({format:$,weekStart:K},s[q]),c!==q&&Object.assign(d,s[c]),r.locale=d,o===t.format&&(o=r.format=d.format),g===t.weekStart&&(g=r.weekStart=d.weekStart,r.weekEnd=R(d.weekStart))}}if(a.format){const e="function"==typeof a.format.toDisplay,t="function"==typeof a.format.toValue,n=y.test(a.format);(e&&t||n)&&(o=r.format=a.format),delete a.format}let v=f,w=l;if(void 0!==a.minDate&&(v=null===a.minDate?u(0,0,1):U(a.minDate,o,d,v),delete a.minDate),void 0!==a.maxDate&&(w=null===a.maxDate?void 0:U(a.maxDate,o,d,w),delete a.maxDate),w<v?(f=r.minDate=w,l=r.maxDate=v):(f!==v&&(f=r.minDate=v),l!==w&&(l=r.maxDate=w)),a.datesDisabled&&(r.datesDisabled=a.datesDisabled.reduce(((e,t)=>{const n=M(t,o,d);return void 0!==n?i(e,n):e}),[]),delete a.datesDisabled),void 0!==a.defaultViewDate){const e=M(a.defaultViewDate,o,d);void 0!==e&&(r.defaultViewDate=e),delete a.defaultViewDate}if(void 0!==a.weekStart){const e=Number(a.weekStart)%7;isNaN(e)||(g=r.weekStart=e,r.weekEnd=R(e)),delete a.weekStart}if(a.daysOfWeekDisabled&&(r.daysOfWeekDisabled=a.daysOfWeekDisabled.reduce(P,[]),delete a.daysOfWeekDisabled),a.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=a.daysOfWeekHighlighted.reduce(P,[]),delete a.daysOfWeekHighlighted),void 0!==a.maxNumberOfDates){const e=parseInt(a.maxNumberOfDates,10);e>=0&&(r.maxNumberOfDates=e,r.multidate=1!==e),delete a.maxNumberOfDates}a.dateDelimiter&&(r.dateDelimiter=String(a.dateDelimiter),delete a.dateDelimiter);let b=p;void 0!==a.pickLevel&&(b=J(a.pickLevel,2),delete a.pickLevel),b!==p&&(p=r.pickLevel=b);let k=h;void 0!==a.maxView&&(k=J(a.maxView,h),delete a.maxView),k=p>k?p:k,k!==h&&(h=r.maxView=k);let D=m;if(void 0!==a.startView&&(D=J(a.startView,D),delete a.startView),D<p?D=p:D>h&&(D=h),D!==m&&(r.startView=D),a.prevArrow){const e=Y(a.prevArrow);e.childNodes.length>0&&(r.prevArrow=e.childNodes),delete a.prevArrow}if(a.nextArrow){const e=Y(a.nextArrow);e.childNodes.length>0&&(r.nextArrow=e.childNodes),delete a.nextArrow}if(void 0!==a.disableTouchKeyboard&&(r.disableTouchKeyboard="ontouchstart"in document&&!!a.disableTouchKeyboard,delete a.disableTouchKeyboard),a.orientation){const e=a.orientation.toLowerCase().split(/\s+/g);r.orientation={x:e.find((e=>"left"===e||"right"===e))||"auto",y:e.find((e=>"top"===e||"bottom"===e))||"auto"},delete a.orientation}if(void 0!==a.todayBtnMode){switch(a.todayBtnMode){case 0:case 1:r.todayBtnMode=a.todayBtnMode}delete a.todayBtnMode}return Object.keys(a).forEach((t=>{void 0!==a[t]&&e(T,t)&&(r[t]=a[t])})),r}const X=c('<div class="datepicker">\n  <div class="datepicker-picker">\n    <div class="datepicker-header">\n      <div class="datepicker-title"></div>\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% prev-btn"></button>\n        <button type="button" class="%buttonClass% view-switch"></button>\n        <button type="button" class="%buttonClass% next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% today-btn"></button>\n        <button type="button" class="%buttonClass% clear-btn"></button>\n      </div>\n    </div>\n  </div>\n</div>'),G=c(`<div class="days">\n  <div class="days-of-week">${o("span",7,{class:"dow"})}</div>\n  <div class="datepicker-grid">${o("span",42)}</div>\n</div>`),Q=c(`<div class="calendar-weeks">\n  <div class="days-of-week"><span class="dow"></span></div>\n  <div class="weeks">${o("span",6,{class:"week"})}</div>\n</div>`);class Z{constructor(e,t){Object.assign(this,t,{picker:e,element:Y('<div class="datepicker-view"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){void 0!==e.pickLevel&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,n){let a=this.beforeShow(new Date(n));switch(typeof a){case"boolean":a={enabled:a};break;case"string":a={classes:a}}if(a){if(!1===a.enabled&&(e.classList.add("disabled"),i(this.disabled,t)),a.classes){const n=a.classes.split(/\s+/);e.classList.add(...n),n.includes("disabled")&&i(this.disabled,t)}a.content&&function(e,t){I(e),t instanceof DocumentFragment?e.appendChild(t):"string"==typeof t?e.appendChild(Y(t)):"function"==typeof t.forEach&&t.forEach((t=>{e.appendChild(t)}))}(e,a.content)}}}class ee extends Z{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const e=Y(G).firstChild;this.dow=e.firstChild,this.grid=e.lastChild,this.element.appendChild(e)}super.init(e)}setOptions(t){let n;if(e(t,"minDate")&&(this.minDate=t.minDate),e(t,"maxDate")&&(this.maxDate=t.maxDate),t.datesDisabled&&(this.datesDisabled=t.datesDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,n=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),void 0!==t.todayHighlight&&(this.todayHighlight=t.todayHighlight),void 0!==t.weekStart&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,n=!0),t.locale){const e=this.locale=t.locale;this.dayNames=e.daysMin,this.switchLabelFormat=e.titleFormat,n=!0}if(void 0!==t.beforeShowDay&&(this.beforeShow="function"==typeof t.beforeShowDay?t.beforeShowDay:void 0),void 0!==t.calendarWeeks)if(t.calendarWeeks&&!this.calendarWeeks){const e=Y(Q).firstChild;this.calendarWeeks={element:e,dow:e.firstChild,weeks:e.lastChild},this.element.insertBefore(e,this.element.firstChild)}else this.calendarWeeks&&!t.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);void 0!==t.showDaysOfWeek&&(t.showDaysOfWeek?(j(this.dow),this.calendarWeeks&&j(this.calendarWeeks.dow)):(W(this.dow),this.calendarWeeks&&W(this.calendarWeeks.dow))),n&&Array.from(this.dow.children).forEach(((e,t)=>{const n=(this.weekStart+t)%7;e.textContent=this.dayNames[n],e.className=this.daysOfWeekDisabled.includes(n)?"dow disabled":"dow"}))}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),n=e.getMonth(),i=u(t,n,1),a=g(i,this.weekStart,this.weekStart);this.first=i,this.last=u(t,n+1,0),this.start=a,this.focused=this.picker.viewDate}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?l():void 0,this.disabled=[...this.datesDisabled];const e=L(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(e),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const e=g(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach(((t,n)=>{t.textContent=function(e){const t=g(e,4,1),n=g(new Date(t).setMonth(0,4),4,1);return Math.round((t-n)/6048e5)+1}(h(e,7*n))}))}Array.from(this.grid.children).forEach(((e,t)=>{const n=e.classList,a=h(this.start,t),r=new Date(a),s=r.getDay();if(e.className=`datepicker-cell ${this.cellClass}`,e.dataset.date=a,e.textContent=r.getDate(),a<this.first?n.add("prev"):a>this.last&&n.add("next"),this.today===a&&n.add("today"),(a<this.minDate||a>this.maxDate||this.disabled.includes(a))&&n.add("disabled"),this.daysOfWeekDisabled.includes(s)&&(n.add("disabled"),i(this.disabled,a)),this.daysOfWeekHighlighted.includes(s)&&n.add("highlighted"),this.range){const[e,t]=this.range;a>e&&a<t&&n.add("range"),a===e&&n.add("range-start"),a===t&&n.add("range-end")}this.selected.includes(a)&&n.add("selected"),a===this.focused&&n.add("focused"),this.beforeShow&&this.performBeforeHook(e,a,a)}))}refresh(){const[e,t]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((e=>{e.classList.remove("range","range-start","range-end","selected","focused")})),Array.from(this.grid.children).forEach((n=>{const i=Number(n.dataset.date),a=n.classList;i>e&&i<t&&a.add("range"),i===e&&a.add("range-start"),i===t&&a.add("range-end"),this.selected.includes(i)&&a.add("selected"),i===this.focused&&a.add("focused")}))}refreshFocus(){const e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach((e=>{e.classList.remove("focused")})),this.grid.children[e].classList.add("focused")}}function te(e,t){if(!e||!e[0]||!e[1])return;const[[n,i],[a,r]]=e;return n>t||a<t?void 0:[n===t?i:-1,a===t?r:12]}class ne extends Z{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(Y(o("span",12,{"data-month":e=>e})))),super.init(e)}setOptions(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),e(t,"minDate"))if(void 0===t.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const e=new Date(t.minDate);this.minYear=e.getFullYear(),this.minMonth=e.getMonth(),this.minDate=e.setDate(1)}if(e(t,"maxDate"))if(void 0===t.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const e=new Date(t.maxDate);this.maxYear=e.getFullYear(),this.maxMonth=e.getMonth(),this.maxDate=u(this.maxYear,this.maxMonth+1,0)}void 0!==t.beforeShowMonth&&(this.beforeShow="function"==typeof t.beforeShowMonth?t.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce(((e,t)=>{const n=new Date(t),a=n.getFullYear(),r=n.getMonth();return void 0===e[a]?e[a]=[r]:i(e[a],r),e}),{}),t&&t.dates&&(this.range=t.dates.map((e=>{const t=new Date(e);return isNaN(t)?void 0:[t.getFullYear(),t.getMonth()]})))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const e=this.selected[this.year]||[],t=this.year<this.minYear||this.year>this.maxYear,n=this.year===this.minYear,i=this.year===this.maxYear,a=te(this.range,this.year);Array.from(this.grid.children).forEach(((r,s)=>{const o=r.classList,c=u(this.year,s,1);if(r.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(r.dataset.date=c),r.textContent=this.monthNames[s],(t||n&&s<this.minMonth||i&&s>this.maxMonth)&&o.add("disabled"),a){const[e,t]=a;s>e&&s<t&&o.add("range"),s===e&&o.add("range-start"),s===t&&o.add("range-end")}e.includes(s)&&o.add("selected"),s===this.focused&&o.add("focused"),this.beforeShow&&this.performBeforeHook(r,s,c)}))}refresh(){const e=this.selected[this.year]||[],[t,n]=te(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((e=>{e.classList.remove("range","range-start","range-end","selected","focused")})),Array.from(this.grid.children).forEach(((i,a)=>{const r=i.classList;a>t&&a<n&&r.add("range"),a===t&&r.add("range-start"),a===n&&r.add("range-end"),e.includes(a)&&r.add("selected"),a===this.focused&&r.add("focused")}))}refreshFocus(){this.grid.querySelectorAll(".focused").forEach((e=>{e.classList.remove("focused")})),this.grid.children[this.focused].classList.add("focused")}}class ie extends Z{constructor(e,t){super(e,t)}init(e,t=!0){var n;t&&(this.navStep=10*this.step,this.beforeShowOption=`beforeShow${n=this.cellClass,[...n].reduce(((e,t,n)=>e+(n?t:t.toUpperCase())),"")}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(Y(o("span",12)))),super.init(e)}setOptions(t){if(e(t,"minDate")&&(void 0===t.minDate?this.minYear=this.minDate=void 0:(this.minYear=v(t.minDate,this.step),this.minDate=u(this.minYear,0,1))),e(t,"maxDate")&&(void 0===t.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=v(t.maxDate,this.step),this.maxDate=u(this.maxYear,11,31))),void 0!==t[this.beforeShowOption]){const e=t[this.beforeShowOption];this.beforeShow="function"==typeof e?e:void 0}}updateFocus(){const e=new Date(this.picker.viewDate),t=v(e,this.navStep),n=t+9*this.step;this.first=t,this.last=n,this.start=t-this.step,this.focused=v(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce(((e,t)=>i(e,v(t,this.step))),[]),t&&t.dates&&(this.range=t.dates.map((e=>{if(void 0!==e)return v(e,this.step)})))}render(){this.disabled=[],this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach(((e,t)=>{const n=e.classList,i=this.start+t*this.step,a=u(i,0,1);if(e.className=`datepicker-cell ${this.cellClass}`,this.isMinView&&(e.dataset.date=a),e.textContent=e.dataset.year=i,0===t?n.add("prev"):11===t&&n.add("next"),(i<this.minYear||i>this.maxYear)&&n.add("disabled"),this.range){const[e,t]=this.range;i>e&&i<t&&n.add("range"),i===e&&n.add("range-start"),i===t&&n.add("range-end")}this.selected.includes(i)&&n.add("selected"),i===this.focused&&n.add("focused"),this.beforeShow&&this.performBeforeHook(e,i,a)}))}refresh(){const[e,t]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach((e=>{e.classList.remove("range","range-start","range-end","selected","focused")})),Array.from(this.grid.children).forEach((n=>{const i=Number(n.textContent),a=n.classList;i>e&&i<t&&a.add("range"),i===e&&a.add("range-start"),i===t&&a.add("range-end"),this.selected.includes(i)&&a.add("selected"),i===this.focused&&a.add("focused")}))}refreshFocus(){const e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach((e=>{e.classList.remove("focused")})),this.grid.children[e].classList.add("focused")}}function ae(e,t){const n={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:n}))}function re(e,t){const{minDate:n,maxDate:i}=e.config,{currentView:a,viewDate:r}=e.picker;let o;switch(a.id){case 0:o=f(r,t);break;case 1:o=p(r,t);break;default:o=p(r,t*a.navStep)}o=s(o,n,i),e.picker.changeFocus(o).render()}function se(e){const t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function oe(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function ce(e){const t=e.picker,n=l();if(1===e.config.todayBtnMode){if(e.config.autohide)return void e.setDate(n);e.setDate(n,{render:!1}),t.update()}t.viewDate!==n&&t.changeFocus(n),t.changeView(0).render()}function de(e){e.setDate({clear:!0})}function le(e){se(e)}function ue(e){re(e,-1)}function he(e){re(e,1)}function fe(e,t){const n=V(t,".datepicker-cell");if(!n||n.classList.contains("disabled"))return;const{id:i,isMinView:a}=e.picker.currentView;a?e.setDate(Number(n.dataset.date)):function(e,t){const n=e.picker,i=new Date(n.viewDate),a=n.currentView.id,r=1===a?f(i,t-i.getMonth()):p(i,t-i.getFullYear());n.changeFocus(r).changeView(a-1).render()}(e,Number(1===i?n.dataset.month:n.dataset.year))}function pe(e){e.inline||e.config.disableTouchKeyboard||e.inputField.focus()}function me(t,n){if(void 0!==n.title&&(n.title?(t.controls.title.textContent=n.title,j(t.controls.title)):(t.controls.title.textContent="",W(t.controls.title))),n.prevArrow){const e=t.controls.prevBtn;I(e),n.prevArrow.forEach((t=>{e.appendChild(t.cloneNode(!0))}))}if(n.nextArrow){const e=t.controls.nextBtn;I(e),n.nextArrow.forEach((t=>{e.appendChild(t.cloneNode(!0))}))}if(n.locale&&(t.controls.todayBtn.textContent=n.locale.today,t.controls.clearBtn.textContent=n.locale.clear),void 0!==n.todayBtn&&(n.todayBtn?j(t.controls.todayBtn):W(t.controls.todayBtn)),e(n,"minDate")||e(n,"maxDate")){const{minDate:e,maxDate:n}=t.datepicker.config;t.controls.todayBtn.disabled=!r(l(),e,n)}void 0!==n.clearBtn&&(n.clearBtn?j(t.controls.clearBtn):W(t.controls.clearBtn))}function ge(e){const{dates:n,config:i}=e;return s(n.length>0?t(n):i.defaultViewDate,i.minDate,i.maxDate)}function ve(e,t){const n=new Date(e.viewDate),i=new Date(t),{id:a,year:r,first:s,last:o}=e.currentView,c=i.getFullYear();switch(e.viewDate=t,c!==n.getFullYear()&&ae(e.datepicker,"changeYear"),i.getMonth()!==n.getMonth()&&ae(e.datepicker,"changeMonth"),a){case 0:return t<s||t>o;case 1:return c!==r;default:return c<s||c>o}}function ye(e){return window.getComputedStyle(e).direction}class we{constructor(e){this.datepicker=e;const t=X.replace(/%buttonClass%/g,e.config.buttonClass),n=this.element=Y(t).firstChild,[i,a,r]=n.firstChild.children,s=i.firstElementChild,[o,c,d]=i.lastElementChild.children,[l,u]=r.firstChild.children,h={title:s,prevBtn:o,viewSwitch:c,nextBtn:d,todayBtn:l,clearBtn:u};this.main=a,this.controls=h;const f=e.inline?"inline":"dropdown";n.classList.add(`datepicker-${f}`),me(this,e.config),this.viewDate=ge(e),A(e,[[n,"click",pe.bind(null,e),{capture:!0}],[a,"click",fe.bind(null,e)],[h.viewSwitch,"click",le.bind(null,e)],[h.prevBtn,"click",ue.bind(null,e)],[h.nextBtn,"click",he.bind(null,e)],[h.todayBtn,"click",ce.bind(null,e)],[h.clearBtn,"click",de.bind(null,e)]]),this.views=[new ee(this),new ne(this),new ie(this,{id:2,name:"years",cellClass:"year",step:1}),new ie(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.config.container.appendChild(this.element)}setOptions(e){me(this,e),this.views.forEach((t=>{t.init(e,!1)})),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active"),this.active=!0;const e=this.datepicker;if(!e.inline){const t=ye(e.inputField);t!==ye(e.config.container)?this.element.dir=t:this.element.dir&&this.element.removeAttribute("dir"),this.place(),e.config.disableTouchKeyboard&&e.inputField.blur()}ae(e,"show")}hide(){this.active&&(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,ae(this.datepicker,"hide"))}place(){const{classList:e,style:t}=this.element,{config:n,inputField:i}=this.datepicker,a=n.container,{width:r,height:s}=this.element.getBoundingClientRect(),{left:o,top:c,width:d}=a.getBoundingClientRect(),{left:l,top:u,width:h,height:f}=i.getBoundingClientRect();let p,m,g,{x:v,y}=n.orientation;a===document.body?(p=window.scrollY,m=l+window.scrollX,g=u+p):(p=a.scrollTop,m=l-o,g=u-c+p),"auto"===v&&(m<0?(v="left",m=10):v=m+r>d||"rtl"===ye(i)?"right":"left"),"right"===v&&(m-=r-h),"auto"===y&&(y=g-s<p?"bottom":"top"),"top"===y?g-=s:g+=f,e.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),e.add(`datepicker-orient-${y}`,`datepicker-orient-${v}`),t.top=g?`${g}px`:g,t.left=m?`${m}px`:m}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){const t=this.currentView,n=this.views[e];return n.id!==t.id&&(this.currentView=n,this._renderMethod="render",ae(this.datepicker,"changeView"),this.main.replaceChild(n.element,t.element)),this}changeFocus(e){return this._renderMethod=ve(this,e)?"render":"refreshFocus",this.views.forEach((e=>{e.updateFocus()})),this}update(){const e=ge(this.datepicker);return this._renderMethod=ve(this,e)?"render":"refresh",this.views.forEach((e=>{e.updateFocus(),e.updateSelection()})),this}render(e=!0){const t=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[t]()}}function be(e,t,n,i,a,s){if(r(e,a,s))return i(e)?be(t(e,n),t,n,i,a,s):e}function ke(e,t,n,i){const a=e.picker,r=a.currentView,s=r.step||1;let o,c,d=a.viewDate;switch(r.id){case 0:d=i?h(d,7*n):t.ctrlKey||t.metaKey?p(d,n):h(d,n),o=h,c=e=>r.disabled.includes(e);break;case 1:d=f(d,i?4*n:n),o=f,c=e=>{const t=new Date(e),{year:n,disabled:i}=r;return t.getFullYear()===n&&i.includes(t.getMonth())};break;default:d=p(d,n*(i?4:1)*s),o=p,c=e=>r.disabled.includes(v(e,s))}d=be(d,o,n<0?-s:s,c,r.minDate,r.maxDate),void 0!==d&&a.changeFocus(d).render()}function De(e,t){if("Tab"===t.key)return void oe(e);const n=e.picker,{id:i,isMinView:a}=n.currentView;if(n.active)if(e.editMode)switch(t.key){case"Escape":n.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(t.key){case"Escape":n.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)re(e,-1);else{if(t.shiftKey)return void e.enterEditMode();ke(e,t,-1,!1)}break;case"ArrowRight":if(t.ctrlKey||t.metaKey)re(e,1);else{if(t.shiftKey)return void e.enterEditMode();ke(e,t,1,!1)}break;case"ArrowUp":if(t.ctrlKey||t.metaKey)se(e);else{if(t.shiftKey)return void e.enterEditMode();ke(e,t,-1,!0)}break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey)return void e.enterEditMode();ke(e,t,1,!0);break;case"Enter":a?e.setDate(n.viewDate):n.changeView(i-1).render();break;case"Backspace":case"Delete":return void e.enterEditMode();default:return void(1!==t.key.length||t.ctrlKey||t.metaKey||e.enterEditMode())}else switch(t.key){case"ArrowDown":case"Escape":n.show();break;case"Enter":e.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Se(e){e.config.showOnFocus&&!e._showing&&e.show()}function _e(e,t){const n=t.target;(e.picker.active||e.config.showOnClick)&&(n._active=n===document.activeElement,n._clicking=setTimeout((()=>{delete n._active,delete n._clicking}),2e3))}function xe(e,t){const n=t.target;n._clicking&&(clearTimeout(n._clicking),delete n._clicking,n._active&&e.enterEditMode(),delete n._active,e.config.showOnClick&&e.show())}function Me(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function Le(e,t){const n=e.element;if(n!==document.activeElement)return;const i=e.picker.element;V(t,(e=>e===n||e===i))||oe(e)}function Ee(e,t){return e.map((e=>L(e,t.format,t.locale))).join(t.dateDelimiter)}function Ce(e,t,n=!1){const{config:i,dates:a,rangepicker:s}=e;if(0===t.length)return n?[]:void 0;const o=s&&e===s.datepickers[1];let c=t.reduce(((e,t)=>{let n=M(t,i.format,i.locale);if(void 0===n)return e;if(i.pickLevel>0){const e=new Date(n);n=1===i.pickLevel?o?e.setMonth(e.getMonth()+1,0):e.setDate(1):o?e.setFullYear(e.getFullYear()+1,0,0):e.setMonth(0,1)}return!r(n,i.minDate,i.maxDate)||e.includes(n)||i.datesDisabled.includes(n)||i.daysOfWeekDisabled.includes(new Date(n).getDay())||e.push(n),e}),[]);return 0!==c.length?(i.multidate&&!n&&(c=c.reduce(((e,t)=>(a.includes(t)||e.push(t),e)),a.filter((e=>!c.includes(e))))),i.maxNumberOfDates&&c.length>i.maxNumberOfDates?c.slice(-1*i.maxNumberOfDates):c):void 0}function Oe(e,t=3,n=!0){const{config:i,picker:a,inputField:r}=e;if(2&t){const e=a.active?i.pickLevel:i.startView;a.update().changeView(e).render(n)}1&t&&r&&(r.value=Ee(e.dates,i))}function Ae(e,t,n){let{clear:i,render:a,autohide:r}=n;void 0===a&&(a=!0),a?void 0===r&&(r=e.config.autohide):r=!1;const s=Ce(e,t,i);s&&(s.toString()!==e.dates.toString()?(e.dates=s,Oe(e,a?3:1),ae(e,"changeDate")):Oe(e,1),r&&e.hide())}class Ne{constructor(e,t={},n){e.datepicker=this,this.element=e;const i=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:document.body,defaultViewDate:l(),maxDate:void 0,minDate:void 0},z(T,this));this._options=t,Object.assign(i,z(t,this));const r=this.inline="INPUT"!==e.tagName;let s,o;if(r)i.container=e,o=a(e.dataset.date,i.dateDelimiter),delete e.dataset.date;else{const n=t.container?document.querySelector(t.container):null;n&&(i.container=n),s=this.inputField=e,s.classList.add("datepicker-input"),o=a(s.value,i.dateDelimiter)}if(n){const e=n.inputs.indexOf(s),t=n.datepickers;if(e<0||e>1||!Array.isArray(t))throw Error("Invalid rangepicker object.");t[e]=this,Object.defineProperty(this,"rangepicker",{get:()=>n})}this.dates=[];const c=Ce(this,o);c&&c.length>0&&(this.dates=c),s&&(s.value=Ee(this.dates,i));const d=this.picker=new we(this);if(r)this.show();else{const e=Le.bind(null,this);A(this,[[s,"keydown",De.bind(null,this)],[s,"focus",Se.bind(null,this)],[s,"mousedown",_e.bind(null,this)],[s,"click",xe.bind(null,this)],[s,"paste",Me.bind(null,this)],[document,"mousedown",e],[document,"touchstart",e],[window,"resize",d.place.bind(d)]])}}static formatDate(e,t,n){return L(e,t,n&&B[n]||B.en)}static parseDate(e,t,n){return M(e,t,n&&B[n]||B.en)}static get locales(){return B}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,n=z(e,this);Object.assign(this._options,e),Object.assign(this.config,n),t.setOptions(n),Oe(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),N(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(e){const t=e?t=>L(t,e,this.config.locale):e=>new Date(e);return this.config.multidate?this.dates.map(t):this.dates.length>0?t(this.dates[0]):void 0}setDate(...e){const n=[...e],i={},a=t(e);"object"!=typeof a||Array.isArray(a)||a instanceof Date||!a||Object.assign(i,n.pop()),Ae(this,Array.isArray(n[0])?n[0]:n,i)}update(e){if(this.inline)return;const t={clear:!0,autohide:!(!e||!e.autohide)};Ae(this,a(this.inputField.value,this.config.dateDelimiter),t)}refresh(e,t=!1){let n;e&&"string"!=typeof e&&(t=e,e=void 0),n="picker"===e?2:"input"===e?1:3,Oe(this,n,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit"))}exitEditMode(e){if(this.inline||!this.editMode)return;const t=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit"),t.update&&this.update(t)}}function Fe(e){const t=Object.assign({},e);return delete t.inputs,delete t.allowOneSidedRange,delete t.maxNumberOfDates,t}function Ve(e,t,n,i){A(e,[[n,"changeDate",t]]),new Ne(n,i,e)}function Be(e,t){if(e._updating)return;e._updating=!0;const n=t.target;if(void 0===n.datepicker)return;const i=e.datepickers,a={render:!1},r=e.inputs.indexOf(n),s=0===r?1:0,o=i[r].dates[0],c=i[s].dates[0];void 0!==o&&void 0!==c?0===r&&o>c?(i[0].setDate(c,a),i[1].setDate(o,a)):1===r&&o<c&&(i[0].setDate(o,a),i[1].setDate(c,a)):e.allowOneSidedRange||void 0===o&&void 0===c||(a.clear=!0,i[s].setDate(i[r].dates,a)),i[0].picker.update().render(),i[1].picker.update().render(),delete e._updating}Object.assign(Ne.locales,{ru:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",format:"dd.mm.yyyy",weekStart:1,monthsTitle:"Месяцы"}});var Te=document.querySelector('input[name="foo"]');null!==Te&&new Ne(Te,{clearBtn:!0,language:"ru",nextArrow:"",prevArrow:"",todayHighlight:!0});var He=document.getElementById("foo");null!==He&&new class{constructor(e,t={}){const n=Array.isArray(t.inputs)?t.inputs:Array.from(e.querySelectorAll("input"));if(n.length<2)return;e.rangepicker=this,this.element=e,this.inputs=n.slice(0,2),this.allowOneSidedRange=!!t.allowOneSidedRange;const i=Be.bind(null,this),a=Fe(t),r=[];Object.defineProperty(this,"datepickers",{get:()=>r}),Ve(this,i,this.inputs[0],a),Ve(this,i,this.inputs[1],a),Object.freeze(r),r[0].dates.length>0?Be(this,{target:this.inputs[0]}):r[1].dates.length>0&&Be(this,{target:this.inputs[1]})}get dates(){return 2===this.datepickers.length?[this.datepickers[0].dates[0],this.datepickers[1].dates[0]]:void 0}setOptions(e){this.allowOneSidedRange=!!e.allowOneSidedRange;const t=Fe(e);this.datepickers[0].setOptions(t),this.datepickers[1].setOptions(t)}destroy(){this.datepickers[0].destroy(),this.datepickers[1].destroy(),N(this),delete this.element.rangepicker}getDates(e){const t=e?t=>L(t,e,this.datepickers[0].config.locale):e=>new Date(e);return this.dates.map((e=>void 0===e?e:t(e)))}setDates(e,t){const[n,i]=this.datepickers,a=this.dates;this._updating=!0,n.setDate(e),i.setDate(t),delete this._updating,i.dates[0]!==a[1]?Be(this,{target:this.inputs[1]}):n.dates[0]!==a[0]&&Be(this,{target:this.inputs[0]})}}(He,{clearBtn:!0,language:"ru",nextArrow:"",prevArrow:"",todayHighlight:!0})})()})();